{% extends "base.html" %}
{% block title %}{{ produit[1] }}{% endblock %}

{% block content %}
<div style="max-width:900px;margin:40px auto; display:flex; flex-wrap:wrap; gap:20px;">

  <!-- Image avec zoom -->
  <div style="flex:1 1 300px; text-align:center;">
    <div class="img-zoom-container">
      <img id="zoomedImg" src="{{ url_for('static', filename='images/' ~ produit[5]) }}" alt="{{ produit[1] }}" class="zoom-image">
      <div class="img-zoom-loupe"></div>
    </div>
  </div>

  <!-- Informations produit -->
  <div style="flex:1 1 300px; display:flex; flex-direction:column; gap:12px;">
    <h2>{{ produit[1] }}</h2>
    <p style="font-weight:bold; color:#005f73; font-size:18px;">Prix : {{ produit[3] }} €</p>
    <p>{{ produit[4] }}</p>
    <form method="POST" style="display:flex; align-items:center; gap:10px;">
      <label for="quantite">Quantité :</label>
      <input type="number" id="quantite" name="quantite" value="1" min="1" style="width:60px; padding:4px; border-radius:4px; border:1px solid #a7d8de;">
        <a href="{{ url_for('add_to_cart', produit_id=produit[0]) }}" 
        class="btn" 
        style="padding:6px 14px; background:#028090; color:white; border:none; border-radius:6px; text-decoration:none;">
          Commander
        </a>
    </form>

    <!-- Section Partager -->
    <div style="margin-top:20px;">
      <h4 style="margin-bottom:8px;">Partager :</h4>
      <div style="display:flex; gap:12px; align-items:center;">
        <a href="https://www.facebook.com/profile.php?id=61575154868258" target="_blank" style="color:#4267B2; font-size:20px;">
          <i class="fab fa-facebook-square"></i>
        </a>
        <a href="https://www.instagram.com/" target="_blank" style="color:#C13584; font-size:20px;">
          <i class="fab fa-instagram-square"></i>
        </a>
        <a href="https://api.whatsapp.com/send?text={{ request.url }}" target="_blank" style="color:#25D366; font-size:20px;">
          <i class="fab fa-whatsapp-square"></i>
        </a>
      </div>
    </div>

  </div>

</div>

<!-- Script zoom -->
<script>
  document.addEventListener("DOMContentLoaded", function(){
    const zoomContainer = document.querySelector(".img-zoom-container");
    const zoomImage = zoomContainer.querySelector("img.zoom-image");
    const loupe = zoomContainer.querySelector(".img-zoom-loupe");

    zoomContainer.addEventListener("mousemove", function(e){
      const rect = zoomContainer.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;

      const xPercent = x / rect.width;
      const yPercent = y / rect.height;

      // Position de la loupe
      const loupeSize = 120;
      loupe.style.width = loupeSize + "px";
      loupe.style.height = loupeSize + "px";
      loupe.style.left = (x - loupeSize/2) + "px";
      loupe.style.top = (y - loupeSize/2) + "px";
      loupe.style.display = "block";

      // Déplacer l'image zoomée
      zoomImage.style.transformOrigin = `${xPercent * 100}% ${yPercent * 100}%`;
      zoomImage.style.transform = "scale(2.2)";
    });

    zoomContainer.addEventListener("mouseleave", function(){
      zoomImage.style.transform = "scale(1)";
      loupe.style.display = "none";
    });
  });
</script>

{% endblock %}
